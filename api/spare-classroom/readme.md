## 空教室查询模块

## Introduction

### APIs

| Method |                   Uri                    |    Description     |
| :----: | :--------------------------------------: | :----------------: |
|  GET   |   [/api/spare-classroom/](index.js#L6)   |     空教室统一查询接口      |
|  POST  | [/api/spare-classroom/update](update.js#L7) | 更新WebService的课表数据集 |

### 统一查询接口的内部逻辑：

* 当查询楼宇为教一~教八时，调用校方接口进行查询；
* 当查询其他楼宇时，通过WebService中自己组织的课表数据进行筛选查询。

同时，该实现保证两种查询方法最终返回的JSON格式一致，即内部的查询逻辑对客户端是透明的。

### WebService端的查询方案：

1. 采集课表数据

   WebService模拟了教室、课表等数据的对象结构，作为一个子模块放在[/models](models)文件夹中。

   通过[POST update API](update.js#L7)，可以爬取各处的总课表信息，保存在models模块的json文件中。  

   **注意：1月4日，研究生院更新了新学期课表，上课时段暂时为空。因此，一段时间内暂不能调用update API。**

2. 查询空教室

   1. 通过查询条件筛选出所有符合条件的课程条目；
   2. 筛去所有有课的教室，返回剩余的空教室数据。


## Future To-dos

- [ ] 采集丁家桥、四牌楼建院的本科生课表
- [ ] 对一些格式较特殊的课程条目进行处理（如一星期有若干天有课）
- [ ] 优化分页查询功能（目前每次换页都需重新遍历数据库生成查询结果）
- [ ] 请求中未选择校区时，同时调用学校与WebService接口进行查询
- [ ] 添加教室的类型数据（空调/多媒体, etc）（这个感觉很难知道啊）
- [ ] 添加学期的查询支持
- [ ] 添加校区/楼宇名称与ID的查询API
- [ ] 统一校区/楼宇名称的输出风格


## Collaborators

- 09016319 叶志浩 [@Vigilans-Yea](https://github.com/Vigilans-Yea)